# 记录清单的具体实现

## 项目初始化

创建一个表单，输入数据库的连接信息（主机，端口，用户名，密码，数据库名）

如果数据库名不存在，则创建一个数据库，如果存在，则使用该数据库，并创建所需的表

## 设计数据库表

要求：
财务报销系统

注：管理表示可以增、删、改、查（同时注意合理性）
一、管理员角色

1. 报销(项目)类别管理：管理可以报销的类别（如国家项目、基金项目、横向项目等）；
2. 用户管理：包括财务人员和报销人员，其中管理财务人员时，同时指定其所负责的报销类别（创新：1人可负责多类别可加分）
3. 项目管理：可以管理报销人员的可报销项目（包括负责人-含报销人员编号 姓名、项目名称、项目来源、所属类别-从1中读取、立项金额、余额），也可查看该项目的报销明细。

负责人：项目的负责人，通常是报销人员，包括他们的编号和姓名。
项目名称：项目的名称或标题。
项目来源：这里指的是项目的资金来源或项目发起的背景。例如，一个项目可能是由某个政府部门资助的，或者是由某个企业委托的，或者是内部发起的。了解项目来源有助于确定项目的报销政策和流程。
所属类别：项目属于哪个报销类别，这个类别决定了项目的报销规则。
立项金额：项目开始时的预算或批准的金额。
余额：项目剩余的可报销金额。

二、财务人员角色

1. 报销管理：可以查看自己所负责的类别的报销，并可对报销内容进行审核，同意后要处理金额（立项金额减，报销人员金额加）

三、报销人员角色

1. 项目管理：可以查看并管理（新增）自己的可报销项目明细（可击项目名称可查看该项目的报明细）。
2. 报销管理：可以管理自己报销的所有明细。

3个角色：管理员、财务人员、报销人员

具体实现可以看[这里](设计数据库表.md)

## 编写创建数据库表的脚本

在项目[初始化](../db/pgsql_init.py)时，实现创建数据库表的脚本，表的设计在[这里](设计数据库表.md)

实现插入初始数据：

1. 在角色表中插入管理员、财务人员、报销人员
2. 在用户中，插入管理员（用户名：admin，密码：随机生成）

## 实现后台API接口

### 用户管理

- [x] 用户登录
- [x] 验证码功能
- [x] 管理员创建报销人员账户和财务人员账户
- [x] 查询用户信息
- [x] 查看用户列表
- [ ] 创建不同角色的用户

### 项目管理

- [ ] 管理员创建项目类别
- [ ] 管理员创建项目
- [ ] 财务人员审核报销项目
- [ ] 报销人员提交报销项目

### 数据查看

- [ ] 管理员查看某个项目的报销明细，包括报销人员、报销金额、报销时间等
- [ ] 财务人员查看自己所负责的类别的报销明细
- [ ] 报销人员查看自己的报销明细

……

## 实现前端页面

- [x] 用户登录页面
- [x] 所有角色共用的模版页面
- [ ] 管理用户页面

……
